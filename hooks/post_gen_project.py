#!/usr/bin/env python
from __future__ import annotations

import shutil
from pathlib import Path

PROJECT_DIRECTORY = Path.cwd().resolve()


def remove_file(__path: str) -> None:
    (PROJECT_DIRECTORY / __path).unlink(missing_ok=True)


def remove_dir(__path: str) -> None:
    shutil.rmtree(PROJECT_DIRECTORY / __path, ignore_errors=True)


if __name__ == "__main__":
    if "{{cookiecutter.include_github_actions}}" != "y":
        remove_dir(".github")
    else:
        if "{{cookiecutter.mkdocs}}" != "y" and "{{cookiecutter.publish_to_pypi}}" == "n":
            remove_file(".github/workflows/on-release-main.yml")

    if "{{cookiecutter.mkdocs}}" != "y":
        remove_dir("docs")
        remove_file("mkdocs.yml")

    if "{{cookiecutter.dockerfile}}" != "y":
        remove_file("Dockerfile")

    if "{{cookiecutter.codecov}}" != "y":
        remove_file("codecov.yaml")
        if "{{cookiecutter.include_github_actions}}" == "y":
            remove_file(".github/workflows/validate-codecov-config.yml")

    if "{{cookiecutter.devcontainer}}" != "y":
        remove_dir(".devcontainer")
